Env preparation

1. sudo apt install git-lfs
2. sudo apt-get install cuda-toolkit-12-8
3. nano ~/.bashrc
4. add
export PATH=/usr/local/cuda-12.8/bin${PATH:+:${PATH}}
export LD_LIBRARY_PATH=/usr/local/cuda-12.8/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}
export CUDA_HOME=/usr/local/cuda-12.8
export PATH=$PATH:/home/ubuntu/.local/bin
to the end of the file
5. source ~/.bashrc

Download libs
1. wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
2. bash Miniconda3-latest-Linux-x86_64.sh
3. source ~/miniconda3/etc/profile.d/conda.sh
4. pip install ninja
5. pip install torch==2.6.0
6. pip install flash_attn==2.7.0.post2 --no-build-isolation
7. pip install -r requirements

Run inference

python3 -m marti.cli.commands.test_new --config-name ma_chain \
  default_agent.pretrain="/data/Qwen2.5-3B" \
  default_agent.vllm_num_engines=1 \
  default_agent.prompt_max_len=7000 \
  default_agent.generate_max_len=1000 \
  default_agent.temperature=0.6 \
  default_agent.rollout_batch_size=64 \
  default_agent.micro_rollout_batch_size=1 \
  default_agent.save_path="$(pwd)/results/ma_chain/Qwen2.5-3B/AMC" \
  prompt_data="json@$(pwd)/data/AMC" \
  input_key="problem" \
  label_key="answer" \
  add_prompt_suffix=""

To run GRPO on single agents


For Search Engine Environment
1. conda create -n retriever python=3.10
2. conda activate retriever

# we recommend installing torch with conda for faiss-gpu
3. conda install pytorch==2.4.0 torchvision==0.19.0 torchaudio==2.4.0 pytorch-cuda=12.1 -c pytorch -c nvidia
4. pip install transformers==4.40 datasets pyserini

## install the gpu version faiss to guarantee efficient RL rollout
5. conda install -c pytorch -c nvidia faiss-gpu=1.8.0

## API function
6. pip install uvicorn fastapi

To test the retriever
curl -X POST "http://127.0.0.1:8080/retrieve" \
  -H "Content-Type: application/json" \
  -d '{"queries": ["What is Python?"], "topk": 3, "return_scores": true}'

git config --global user.email "yutongzhang20080108@outlook.com"
git config --global user.name "Aaron Zhang"